<ion-content>
  <!-- Formulario de Registro -->
  <ion-card class="form-card">
    <ion-card-header>
      <ion-card-title>Registro de Usuario</ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <form [formGroup]="persona" (ngSubmit)="registrar()">
        <!-- RUT -->
        <ion-item class="form-item">
          <ion-label position="floating">RUT</ion-label>
          <ion-input formControlName="rut" type="text"></ion-input>
        </ion-item>

        <!-- Nombre -->
        <ion-item class="form-item">
          <ion-label position="floating">Nombre</ion-label>
          <ion-input formControlName="nombre" type="text"></ion-input>
        </ion-item>

        <!-- Fecha de Nacimiento -->
        <ion-item class="form-item">
          <ion-label position="floating">Fecha de Nacimiento</ion-label>
          <ion-input formControlName="fecha_nacimiento" type="date"></ion-input>
        </ion-item>

        <!-- Género -->
        <ion-item class="form-item">
          <ion-label>Género</ion-label>
          <ion-select formControlName="genero" placeholder="Selecciona tu género">
            <ion-select-option value="masculino">Masculino</ion-select-option>
            <ion-select-option value="femenino">Femenino</ion-select-option>
            <ion-select-option value="otro">Otro</ion-select-option>
          </ion-select>
        </ion-item>

        <!-- ¿Tiene Auto? -->
        <ion-item class="form-item">
          <ion-label>¿Tiene Auto?</ion-label>
          <div class="radio-group">
            <ion-button 
              class="custom-radio-button yes-button"
              [class.selected]="persona.controls.tiene_auto.value === 'si'"
              (click)="persona.controls.tiene_auto.setValue('si')">
              Sí
            </ion-button>
            <ion-button 
              class="custom-radio-button no-button"
              [class.selected]="persona.controls.tiene_auto.value === 'no'"
              (click)="persona.controls.tiene_auto.setValue('no')">
              No
            </ion-button>
          </div>
        </ion-item>

        <!-- Patente del Auto (solo si tiene auto) -->
        <ion-item *ngIf="persona.controls.tiene_auto.value === 'si'" class="form-item">
          <ion-label position="floating">Patente del Auto</ion-label>
          <ion-input formControlName="patente_auto" type="text"></ion-input>
        </ion-item>

        <!-- Botones de Acción -->
        <ion-row class="ion-margin-top">
          <ion-col size="12">
            <ion-button expand="full" [disabled]="persona.invalid" color="primary" shape="round" size="large">Registrar</ion-button>
          </ion-col>
        </ion-row>
        <ion-row class="ion-margin-top">
          <ion-col size="6">
            <ion-button expand="full" [disabled]="botonModificar || persona.invalid" (click)="modificar()" color="success" shape="round" size="large">Modificar</ion-button>
          </ion-col>
          <ion-col size="6">
            <ion-button expand="full" type="reset" color="medium" shape="round" size="large">Limpiar</ion-button>
          </ion-col>
        </ion-row>
      </form>
    </ion-card-content>
  </ion-card>

  <!-- Lista de Usuarios -->
  <div *ngIf="usuarios.length > 0; else noHayUsuarios" class="user-list-container">
    <ion-list>
      <ion-item-sliding *ngFor="let usuario of usuarios">
        <ion-item>
          <ion-avatar slot="start">
            <img src="../../../assets/images/perfil.png" alt="Avatar de Usuario">
          </ion-avatar>
          <ion-label>
            <h2>{{usuario.rut}}</h2>
            <p>{{usuario.nombre}}</p>
          </ion-label>
        </ion-item>
        <ion-item-options side="start">
          <ion-item-option (click)="buscar(usuario.rut)" color="warning">Buscar</ion-item-option>
        </ion-item-options>
        <ion-item-options side="end">
          <ion-item-option (click)="eliminar(usuario.rut)" color="danger">Eliminar</ion-item-option>
        </ion-item-options>
      </ion-item-sliding>
    </ion-list>
  </div>

  <ng-template #noHayUsuarios>
    <ion-img src="../../../assets/images/NO-HAY-DATOS.png" alt="No hay registros existentes"></ion-img>
  </ng-template>
</ion-content>
